<script type="text/discourse-plugin" version="1.14.0">
  const background_animation = settings.background_animation;
  const showLinks = settings.show_tsParticles_links_animation;
  const showAnemone = settings.show_tsParticles_anemone_animation;
  const showHyperspace = settings.show_tsParticles_hyperspace_animation;
  if (background_animation == 'Hyperspace') {
    
    const script_one = document.createElement('script');
    script_one.addEventListener("load", () => {
          console.log("called", tsParticles);
          initTsParticlesAnemone();
    });
    script_one.src = "https://cdn.jsdelivr.net/npm/@tsparticles/preset-hyperspace@3/tsparticles.preset.hyperspace.bundle.min.js";

    document.body.appendChild(script_one);
    
    function initTsParticlesAnemone() {
    (async () => {
      await loadHyperspacePreset(tsParticles);

      await tsParticles.load({
        id: "tsparticles",
        options: {
          preset: "hyperspace",
        },
      });
    })();
    }
    document.addEventListener("DOMContentLoaded", function() {
      var elements = document.querySelectorAll('section#main');
      elements.forEach(function(el) {
        var wrapper = document.createElement('div');
        wrapper.className = 'wrapper';
        el.parentNode.insertBefore(wrapper, el);
        wrapper.appendChild(el);
      });
      var elements = document.querySelectorAll('div#main-outlet-wrapper');
      elements.forEach(function(el) {
        var wrapper = document.createElement('div');
        wrapper.className = 'content';
        el.parentNode.insertBefore(wrapper, el);
        wrapper.appendChild(el);
      });
    });
  }
  
  
  
  
  if (background_animation == 'Anemone') {
    const script_one = document.createElement('script');
    script_one.addEventListener("load", () => {
          console.log("called", tsParticles);
          initTsParticlesAnemone();
    });
    script_one.src = "https://cdn.jsdelivr.net/npm/@tsparticles/preset-sea-anemone@3.0.2/tsparticles.preset.seaAnemone.bundle.min.js";

    document.body.appendChild(script_one);
    
    function initTsParticlesAnemone() {
      (async () => {
        await tsParticles.load(
          {
            id: "tsparticles",
            options: {
              preset: "seaAnemone"
            }
          }
        );
      })();
    }
    document.addEventListener("DOMContentLoaded", function() {
      var elements = document.querySelectorAll('section#main');
      elements.forEach(function(el) {
        var wrapper = document.createElement('div');
        wrapper.className = 'wrapper';
        el.parentNode.insertBefore(wrapper, el);
        wrapper.appendChild(el);
      });
      var elements = document.querySelectorAll('div#main-outlet-wrapper');
      elements.forEach(function(el) {
        var wrapper = document.createElement('div');
        wrapper.className = 'content';
        el.parentNode.insertBefore(wrapper, el);
        wrapper.appendChild(el);
      });
    });
  }
  
  if (background_animation == 'Links') {
    const script_two = document.createElement('script');
    script_two.addEventListener("load", () => {
          console.log("called", tsParticles);
          initTsParticlesLinks();
    });
    script_two.src = "https://cdn.jsdelivr.net/npm/@tsparticles/preset-links@3.0.2/tsparticles.preset.links.bundle.min.js";
    document.head.appendChild(script_two);
    
    function initTsParticlesLinks() {
      (async () => {
        await tsParticles.load({
          id: "tsparticles",
          options: {
            preset: "links" 
          },
        });
      })();
    }
    document.addEventListener("DOMContentLoaded", function() {
      var elements = document.querySelectorAll('section#main');
      elements.forEach(function(el) {
        var wrapper = document.createElement('div');
        wrapper.className = 'wrapper';
        el.parentNode.insertBefore(wrapper, el);
        wrapper.appendChild(el);
      });
      var elements = document.querySelectorAll('div#main-outlet-wrapper');
      elements.forEach(function(el) {
        var wrapper = document.createElement('div');
        wrapper.className = 'content';
        el.parentNode.insertBefore(wrapper, el);
        wrapper.appendChild(el);
      });
    });
  }
</script>

